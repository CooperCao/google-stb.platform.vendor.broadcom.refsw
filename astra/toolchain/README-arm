Astra Toolchain for 32-bit ARM CPU

This package contains the scripts and patches that are used to build the
Astra toolchain for 32-bit ARM CPU.



1. Toolchain Source

1.1 Packages

The actual source code packages for the following components are downloaded
from Internet via wget utility:

    * GNU binutils:     binutils-2.25.1.bz2
    * GNU gcc:          gcc-5.3.0.bz2
    * MUSL libc:        musl-1.1.12.tar.gz

1.2 Patches

Astra makes modifications to the packages above. The Astra specific patches
can be found under ./patches directory.

1.3 Scripts

The scripts for building the toolchain or cleaning the toolchain build can
be found under ./scripts directory. These scripts need to be run on Linux
system from the top level directory.



2. Toolchain Build

2.1 Setting Environment Variables

Most of the build scripts are shared between toolchain for 32-bit ARM CPU
and toolchain for 64-bit ARM CPU in AARCH64 state. To build for 32-bit ARM
CPU, one needs to set up the proper environment variables:

	source scripts/setenv-arm.sh

2.2 One-Shot Build

The following script builds the Astra toolchain in one shot:

    ./scripts/build-all.sh      download all pkgs & build entire toolchain

2.3 Step-by-Step Build

If one chooses to build the Astra toolchain step-by-step, the following
scripts have to be executed in the order they are listed:

    ./scripts/build-binutils.sh download & patch binutils pkg, build binutils
    ./scripts/build-gcc-src.sh  download & patch gcc pkg
    ./scripts/build-gcc-1       build gcc stage 1 after binutils has been built
    ./scripts/build-musl.sh     download musl pkg, build musl after gcc stage 1
    ./scripts/build-gcc-2       build gcc stage 2 after musl has been built

2.4 Build Results

The following directories are created during the build process:

    ./binutils-2.25.1           binutils source directory
    ./build-binutils            binutils intermediate directory
    ./gcc-5.3.0                 gcc source directory
    ./build-gcc-1               gcc stage 1 intermediate directory
    ./build-gcc-2               gcc stage 2 intermediate directory
    ./musl-1.1.12               musl source directory

The resultant Astra toolchain is installed in the following directory:

    ./install

2.5 Cleaning A build

It is recommended to remove all intermediate directories for a clean build.

    rm -rf build-* install

One may also need to remove the source directories, if source code needs to
be repatched:

    rm -rf binutils-2.25.1
    rm -rf gcc-5.3.0
    rm -rf musl-1.1.12

The following script can also be used to remove all derived directories
during the toolchain build:

    ./scripts/clean-all.sh