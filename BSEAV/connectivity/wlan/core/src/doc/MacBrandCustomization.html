<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- Copyright 2008-2011, Broadcom Corporation $ -->
<!-- $Id: MacBrandCustomization.html,v 15.6 2011-01-11 18:16:41 willfeng Exp $ -->
<title>Broadcom USB iLine10&trade; Macintosh Network Driver Brand Customization Notes</title>
</head>

<body>

<p>
<img ALT="Broadcom Corportation" SRC="Images/BCMLogo.gif" WIDTH="200" HEIGHT="98"></p>

<h1>Broadcom USB iLine10&trade; Macintosh Network Driver Brand Customization Notes</h1>

<p align="center"><b><font COLOR="red">Broadcom Corporation Confidential. For evaluation use only.</font></b>
</p>

<hr SIZE="4">

<h2>Introduction</h2>

<p>
The USB iLine10&trade; Macintosh driver is built for the Broadcom USB
iLine10&trade; Reference design, but may be modified to work for other
USB devices. Particularly, the driver is only loaded by the Mac OS if
a USB device with the Broadcom USB Reference USB VID/PID (Vendor ID
and Product ID) is connected. Products based on the reference design
will need to have a driver that has been modified to load for the
product's VID/PID.
</p>

<p>
The driver has a resource that specifies the product VID/PID for which
the driver loads. The driver also has resources for user visible
strings presented by the Mac OS. In addition, the driver libraries
must be given a unique name when the driver is customized. This
involves renaming the driver libraries and providing the library names
as resources.
</p>

<p>
The user visible strings presented by the Mac OS are the network port
names. These names are presented in the "Connect via:" pop-up menus in
the AppleTalk and TCP/IP control panels. There are two variations of
the port name strings. One string is used when there is only one port
of it's type on the machine. The default is "<KBD>USB
iLine</KBD>". When there are more than one of the same type of
networking port on the machine, a string including a port number is
used. The other string for the port name includes a simple replacement
pattern, "<KBD>^0</KBD>", which is replaced with the port number when
displayed. The default string for the multiple port name is "<KBD>USB
iLine ^0</KBD>". These strings may be changed for a brand-specific
driver.
</p>

<h2>Gathering The Necessary Tools</h2>

<p>
This release provides an MPW (Macintosh Programmer's Workshop) script,
<KBD>Brand</KBD>, for retargeting the Broadcom USB iLine10&trade;
Macintosh driver to a branded product. There is also a Rez (a Resource
compiler) source file, <KBD>USBBrand.r</KBD>, and accompanying header
file, <KBD>USBResDefs.h</KBD>, used by the MPW script to create the
brand-specific resources.
</p>

<p>
To use the provided tools, you will need the MPW package from
Apple. The package is available at the 
<a href="http://developer.apple.com/">Apple Developer</a> web site. The
current location for the MPW tools is the 
<a href="http://developer.apple.com/tools/mpw-tools">Macintosh
Programmer's Workshop</a> page. Download the MPW package to a
Macintosh.
</p>

<h2>Performing the Brand Customization</h2>

<p>
Start the MPW Shell application. A command shell file called
<KBD>Worksheet</KBD> will be opened. The <KBD>Brand</KBD> script needs
to be run from the directory containing the <KBD>USBBrand.r</KBD> Rez
file, so switch to the appropriate directory with the <KBD>Directory</KBD>
command.
</p>

<p>
Next, execute the Brand script providing the parameters for your
product. The only required parameters are the input driver file, the
output driver file to create, and the USB VID and PID. In addition,
you may specify a string for the user visible networking port
name. Both the single port and multiple port names must be specified
if either is specified. You may also specify the library base name if
you do not want to use the automatically generated name. Execute the
"<KBD>Brand -h</KBD>" command if you want more information on this
specifying the library name.
</p>

<p>
Here is an example of an MPW session to carry out these steps. The
hard drive on the example Macintosh is "<KBD>MacBuild</KBD>", and the
Broadcom driver release is in the folder "<KBD>MacBuild:USB iLine
2.32</KBD>". The desired file name is "<KBD>USB Widget</KBD>", and the
desired port string is also "<KBD>USB Widget</KBD>":
</p>

<PRE><KBD>Directory "MacBuild:USB iLine 2.32"
Brand "USB iLine10&trade; Broadcom" -o "USB Widget" &delta;
    -vid "0xABCD" -pid "0x1234"               &delta;
    -p1 "USB Widget" -p2 "USB Widget ^0"</KBD></PRE>

<p>
Note: The line continuation character in MPW is "&delta;" (Option-d),
the Greek character delta. If you copy the commands from this web
page, be sure to retype the delta characters or put the
<KBD>Brand</KBD> command on a single line. Commands are executed in
MPW by using the <KBD>&lt;Enter&gt;</KBD> key (not <KBD>&lt;Return&gt;</KBD>),
or the <KBD>Command-&lt;Return&gt;</KBD> key combination. Multi-line
commands, like the Brand command above, are executed by selecting all
the lines of the command, then hitting the <KBD>&lt;Enter&gt;</KBD> or
<KBD>Command-&lt;Return&gt;</KBD>.
</p>

</body>
</html>
