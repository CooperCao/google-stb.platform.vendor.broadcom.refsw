<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (X11; I; FreeBSD 2.2.5-RELEASE i386) [Netscape]">
   <TITLE>Usage and Configuration Notes</TITLE>
</HEAD>
<BODY>
<!-- Copyright 1999-2011, Broadcom $ -->
<!-- $Id: UsageAndConfig.html,v 15.10 2011-01-11 17:45:11 willfeng Exp $ -->

<IMG SRC="epigram_logo.gif" HEIGHT=65 WIDTH=250>

<CENTER>
<H1>Usage and Configuration Notes (Release 17.1)</H1>
<B>Epigram Confidential. For internal use only.</B>
</CENTER>

<HR SIZE=6>

<H2>Command Line Options:</H2>

<H3>
cnic_phy_tst:</H3>
<TT>cnic_phy_tst { xmt_ibuf.dat | /dev/vipps } { xmt_obuf.dat
| /dev/nsr }</TT>
<BR><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{ rcv_ibuf.dat | /dev/nsr } { rcv_obuf.dat | /dev/vipps }</TT>
<BR><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
id nbits_per_baud [ probe_flag [-link | -nolink]</TT>
<BR><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
[-arq | -noarq | -arqhdrs [ -arqbufms nn ] [ -arqbufmax nn ]</TT>
<BR><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
[ -arqdestmax nn ] [ -arqremindms nn ] [ -arqnackms nn ]</TT>
<BR><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
[ -arqnackcnt nn ] ] ]</TT>

<P>or

<P><TT>cnic_phy_tst -default [-link | -nolink] [-arq | -noarq
| -arqhdrs [ -arqbufms nn ]</TT>
<BR><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
[ -arqbufmax nn ] [ -arqdestmax nn ] [ -arqremindms nn ] [ -arqnackms nn
]</TT>
<BR><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
[ -arqnackcnt nn ] ]</TT>

<H3>Parameters:</H3>
<CENTER><TABLE BORDER WIDTH="90%" >
<TR>
<TD><TT>xmt_ibuf.dat&nbsp;</TT>
<BR><TT>/dev/vipps</TT></TD>

<TD>File to use as input for transmitter.&nbsp; To attach to VIPndis driver,
use "/dev/vipps".</TD>
</TR>

<TR>
<TD><TT>xmt_obuf.dat&nbsp;</TT>
<BR><TT>/dev/nsr</TT></TD>

<TD>File to use as output for transmitter.&nbsp; To attach to cnic driver,
use "/dev/nsr".</TD>
</TR>

<TR>
<TD><TT>rcv_ibuf.dat&nbsp;</TT>
<BR><TT>/dev/nsr</TT></TD>

<TD>File to use as input for receiver.&nbsp; To attach to cnic driver,
use "/dev/nsr".</TD>
</TR>

<TR>
<TD><TT>rcv_obuf.dat&nbsp;</TT>
<BR><TT>/dev/vipps</TT></TD>

<TD>File to use as output for transmitter.&nbsp; To attach to VIPndis driver,
use "/dev/vipps".</TD>
</TR>

<TR>
<TD><TT>id</TT></TD>

<TD>ID to use for this station. Valid values are 0-254 and -1.&nbsp; If
-1 is specified, the station ID will be set using the least significant
byte of the CNIC MAC address.</TD>
</TR>

<TR>
<TD><TT>nbits_per_baud</TT></TD>

<TD>Constellation size to use. Valid values are 2-8 and 0.&nbsp; 0 enables
rate negotiation.</TD>
</TR>

<TR>
<TD><TT>probe_flag</TT></TD>

<TD>Any non-zero value will enable generation of receiver probe outputs.
Default is disabled.</TD>
</TR>

<TR>
<TD><TT>-default</TT></TD>

<TD>Equivalent to "/dev/vipps /dev/nsr /dev/nsr /dev/vipps 0 -1 0"</TD>
</TR>

<TR>
<TD><TT>-link&nbsp;</TT>
<BR><TT>-nolink</TT></TD>

<TD>Enable/disable sending of link integrity frames.&nbsp; Default is enabled.</TD>
</TR>

<TR>
<TD><TT>-arq&nbsp;</TT>
<BR><TT>-noarq&nbsp;</TT>
<BR><TT>-arqhdrs</TT></TD>

<TD>Enable full arq/disable arq/enable inclusion of arq headers only.&nbsp;
Default is disable arq, but the default can also be overridden by relevant
registry settings.</TD>
</TR>

<TR>
<TD><TT>-arqbufms nn</TT></TD>

<TD>Specify the interval that a transmit frame buffer will be saved for
possible retransmission. The current default is 150 milliseconds. Larger
numbers (and perhaps even 150) are more likely to interfere with TCP timeouts.
Much smaller numbers may not provide enough time to get nack reqests, especially
from soft-phy stations.</TD>
</TR>

<TR>
<TD><TT>-arqbufmax nn</TT></TD>

<TD>Specify the maximum number of buffers that ARQ will save for the entire
interface (sum of all stations). This should be a little smaller than the
total number of buffers in the transmit pool (perhaps total - 2).</TD>
</TR>

<TR>
<TD><TT>-arqdestmax nn</TT></TD>

<TD>Specify the maximum number of buffers that ARQ will save for a single
destination. The software implementation has a practical upper limit of
31 (though setting it higher shouldn't cause things to fail). The default
is 20 today.</TD>
</TR>

<TR>
<TD><TT>-arqremindms nn</TT></TD>

<TD>Specify the interval to wait after transmitting a data frame with a
new sequence number before sending a reminder control frame, if no other
traffic has been sent to the same destination. The default is 50 milliseconds
today.</TD>
</TR>

<TR>
<TD><TT>-arqnackms nn</TT></TD>

<TD>Specify the interval to wait before sending a nack control packet if
no other traffic for the same destination has been sent which would allow
the nack indication to be piggy-backed. The current default is 15 milliseconds.
(Although currently available, some implementation of ARQ may not support
piggy-backing, in which case the first nack control frame is generated
immediately.)</TD>
</TR>

<TR>
<TD><TT>-arqnackcnt nn</TT></TD>

<TD>Specify the maximum number of times a given nack indication is sent
to the source station, either by control frame or piggy-backed. The default
today is 3, though this might be changed to 2 if piggy-backing is eliminated,
or when collision resolution is working.</TD>
</TR>
</TABLE></CENTER>

<H3>cnic_re_stack:</H3>
<TT>
<PRE>cnic_re_stack [options] [nbits_per_baud]
Options are:
    -s or --service       Start as a service.
    -d or --demod-threads Count of demodulation threads.
    -b or --demod-buffers Count of demodulation buffers.
    -l or --nolink        Do not inlcude link integ.
    -p or --probe         Turn on debug probe files.
    -h or --help          Print help.
</PRE>
</TT>

<H2>
Registry Settings:</H2>

<H3>
cnic_phy_tst:</H3>

<B>
Key: HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\EpiWinPhy\Parameters</B>

<CENTER><TABLE BORDER WIDTH="90%" >
<TR>
<TD ROWSPAN="2"><B>Entry name</B></TD>
<TD><B>Type</B></TD>
<TD ROWSPAN="2"><B>Description</B></TD>
</TR>
<TR>
<TD><B>Values</B></TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP ROWSPAN="3"><TT>Error Packet Logging</TT></TD>

<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD>Control error packet logging in the phy</TD>
</TR>

<TR>
<TD><TT>0&nbsp;(default)</TT></TD>
<TD>Disable error packet logging</TD>
</TR>

<TR>
<TD><TT>1</TT></TD>
<TD>Enable error packet logging</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP ROWSPAN="3"><TT>No Match Errors</TT></TD>

<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD>Controls interpretation of "dst no match"
as an error for error packet logging</TD>
</TR>

<TR>
<TD><TT>0&nbsp;(default)</TT></TD>
<TD>Do not include "dst no match" as an error</TD>
</TR>

<TR>
<TD><TT>1</TT></TD>
<TD>Include "dst no match" as an error</TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP ROWSPAN="3"><TT>RcvThreadAffinity</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD>Set the processor affinity of the receive demod thread</TD>
</TR>

<TR>
<TD><TT>0xffffffff&nbsp;(default)</TT></TD>
<TD>Do not set thread affinity</TD>
</TR>

<TR>
<TD><TT>0-N</TT></TD>
<TD>Set receive thread processor affinity to the specifed processor</TD>
</TR>

<TR>
<TD><TT>CSThreshUp</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>CSThreshDn</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>CSNpktsUp</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>CSNpktsDn</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>ArqEnable</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>ArqBufferHoldMs</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>ArqMaxTxBufCnt</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>ArqMaxDestBufCnt</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>ArqRemindMs</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>ArqNackRemindMs</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>ArqNackRepeatCnt</TT></TD>

<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>
</TABLE></CENTER>

<H3>
VIPndis:</H3>

<B>
Key: HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\VIPndis</B>

<CENTER><TABLE BORDER WIDTH="90%" >
<TR>
<TD><B>Entry name</B></TD>

<TD><B>Type</B></TD>

<TD><B>Description</B></TD>

<TD><B>Values</B></TD>

<TD><B>Explanation</B></TD>
</TR>

<TR>
<TD></TD>

<TD VALIGN=TOP><TT>DWORD</TT></TD>

<TD></TD>

<TD></TD>

<TD></TD>
</TR>
</TABLE></CENTER>

<H3>
CNSR:</H3>

<B>
Key: HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\CNSR\Parameters</B>

<CENTER><TABLE BORDER WIDTH="90%" >
<TR>
<TD ROWSPAN="2"><B>Entry name</B></TD>
<TD><B>Type</B></TD>
<TD ROWSPAN="2"><B>Description</B></TD>
</TR>
<TR>
<TD><B>Values</B></TD>
</TR>

<TR>
<TD ALIGN=LEFT VALIGN=TOP ROWSPAN="4"><TT>IFGControl</TT></TD>

<TD VALIGN=TOP><TT>DWORD</TT></TD>

<TD>Controls the inter-frame gap value
written to the CNIC control register. The default value for the IFG (8)
is always written to the register when cnsr.sys starts.&nbsp; When setting
up the DMA of packet data to the cnic, cnsr.sys will write a new IFG value
to the CNIC control register based on the IFGControl key value.&nbsp; The
registry is only checked by cnsr.sys a startup, so changed to the IFGControl
key will only take effect after a reboot</TD>
</TR>

<TR>
<TD><TT>0&nbsp;(default)</TT></TD>
<TD>Do not adjust IFG per-packet</TD>
</TR>

<TR>
<TD><TT>1</TT></TD>
<TD>Randomly select an IFG value between 3-15, inclusive</TD>
</TR>

<TR>
<TD><TT>2-15</TT></TD>
<TD>Use the value of key as the IFG value</TD>
</TR>

<TR>
<TD><TT>TxBufsize</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>RxBufsize</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>NumTxBufs</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

<TR>
<TD><TT>NumRxBufs</TT></TD>
<TD VALIGN=TOP><TT>DWORD</TT></TD>
<TD></TD>
</TR>

</TABLE></CENTER>
<P>
<A HREF="ReleaseNotes.html">Release Notes</A>
</BODY>
</HTML>
