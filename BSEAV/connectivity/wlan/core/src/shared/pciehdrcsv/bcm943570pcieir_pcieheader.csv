Header Fields,,,,,BCM43570pcieir PCIe Header Template,
Byte Offset,,Word Offset,,Description,Value,Explanation
Dec,Hex,Dec,Hex,,Hex,
0,0,0,0,"15:12 Translate 3rd/7th 4k entry in Bar0 space
11 PWR_SYSTEM_ALLOC This bit controls the system alloc bit in the PWR_BDGT_CAP (0x15c) in the configuration space
10:4 - Internal register configuration
3 ASPM_L1_1_SUPP Advertize L1_1 capability support for ASPM
2 ASPM_L1_2_SUPP Advertize L1_2 capability support for ASPM
1 PM_L1_1_SUPP Advertize L1_1 capability support for PM
0 PM_L1_2_SUPP Advertize L1_2 capability support for PM",0x380F,
2,2,1,1,"15 - Internal reserved
14 - Xtal frequecy selector bit_1. ""00"" - 40Mhz, ""01"" - 37.4 Mhz, ""10"" - 38.4 Mhz, ""11"" - reserved
13 - ASPM_OPTIONALITY: This bit when set, sets the ASPM optionality bit in the link cap register. This bit is recommended to be set for newer PCIe devices and required for 3.0 compliant devices
12 - Hot reset enable: 0 will gate off phyHotReset from resetting PCIE logic and the backplane. Set this internal bit to 1.
11 - Xtal frequency selector bit_0
10:8 - Internal reserved
7:0 - PM_DATA_8_PRG This is the value read from the pm_data register when the DATA_SEL value in PM_CSR is 8. This is the power dissipated by common logic in case of multi function devices. The value is sticjy and only reset by HARD Reset",0x3000,SPROM PCIE Header Map; Bit11: Select xtal frequency = 40MHz
4,4,2,2,PCI subsystem ID,0x0743,BCM943570PCIEIR
6,6,3,3,PCI subsystem vendor ID,0x14E4,for now Broadcom.
8,8,4,4,"15:5 - Internal reserved; must be set to binary ""000_0001_0000""
4:3 - ASPM_SUPPORT: controls the value of the ASPM_SUPT field in linlk capability register
Bits 4:3 is for ASPM. 00 - no ASPM supported; 01 - L0s supported; 10 - L1 supported; 11 - L0s and L1 supported
2:0 - Internal reserved; must be set to binary ""100""",0x021C,http://jira.broadcom.com/browse/CRWLPCIEGEN2-44
10,A,5,5,L0/L1 Latency - Device link Latency and other internal settings; must be set to 0x1B7E,0x1B7E,
12,C,6,6,PCIe Port Number,0x0A00,CRWLPCIEGEN2-161 WAR
14,E,7,7,PowerBudget0,0x0000,
16,10,8,8,PowerBudget1,0x0000,
18,12,9,9,PowerBudget2,0x0000,
20,14,10,A,PowerBudget3,0x0000,
22,16,11,B,PowerBudget4,0x0000,
24,18,12,C,"7:0 Clkreq control
15:8 Pointer to Device Serial Number""",0x48D4,8 MSB to 0x48 to indicate the start of the MAC address; 8 LSB = CRWLPCIEGEN2-161 WAR
26,1A,13,D,"15:14 - Internal reserved
13 - Enable the PM L1 substates extended capability structure; set to 1
12:10 - Internal reserved10 - Non posted header credits; 0 - 1 NPH advertized; 1 - 2 NPH advertized
9:0 - Controls LTR Active latency value; Set as 0x13C for 60us latency",0x253C,"Bit 15:13 :Recommend 0x1 for 256 Bytes max payload size (MPS). Our current validation has been with 256 Bytes MPS. Note that we do make 2KB read requests (MRRS – max read request size).
Bit 9-0: Firmware overrides this setting to appropriate value"
28,1C,14,E,"15:13 Max Payload Size (MPS) capability advertized in Device capability cfg:0xB0(2:0); Set as 0x2 for 512Bytes MPS; Set as 0x1 for 256 Bytes; Set as 0x0 for 128Bytees
12:10 Internal reserved
9:0 Controls LTR Active Idle Latency value; Set as 0x164 for 100us latency",0x2164,
30,1E,15,F,"15:14 - Internal reserved
13:12 - Internal; set to 11
11:10 - Internal reserved",0x3203,
32,20,16,10,Power budgets for different power mgmt states (sel=1),0x3E52,CRWLPCIEGEN2-161 WAR
34,22,17,11,Power budgets for different power mgmt states (sel=2),0x9605,http://jira.broadcom.com/browse/CRWLPCIEGEN2-44
36,24,18,12,MDIO,0x0000,
38,26,19,13,"Bits [3:0] - mdio addr[1][5:2]
Bits [9:4] - mdio addr[2][5:0]
Bits [15:10] - mdio addr[3][5:0]",0x0000,
40,28,20,14,Bits [15:0] - mdio data[0][15:0],0x0000,
42,2A,21,15,Bits [15:0] - mdio data[1][15:0],0x0000,
44,2C,22,16,Bits [15:0] - mdio data[2][15:0],0x0000,
46,2E,23,17,Bits [15:0] - mdio data[3][15:0],0x0000,
48,30,24,18,"Bits [13:8] - mdio addr[4][5:0]
Bits [15:14] - mdio addr[5][1:0]",0x0000,
50,32,25,19,"Bits [3:0] - mdio addr[5][5:2]
Bits [9:4] - mdio addr[6][5:0]
Bits [15:10] - mdio addr[7][5:0]",0x0000,
52,34,26,1A,Bits [15:0] - mdio data[4][15:0],0x0000,
54,36,27,1B,Bits [15:0] - mdio data[5][15:0],0x0000,
56,38,28,1C,Bits [15:0] - mdio data[6][15:0],0x0000,
58,3A,29,1D,Bits [15:0] - mdio data[7][15:0],0x0000,
60,3C,30,1E,"Bits [0] - Num of Vld mdio access[3]
Bits [2:1] - represents l1_sub_pwr_on_scale value for L1_sub_capability registerBits 
[7:3] - represents l1_sub_pwr_on_value value for L1_sub_capability registerBits 
[15:8] - Internal reserved",0x002A,CRWLPCIEGEN2-161 WAR
62,3E,31,1F,Internal reserved,0x0000,
64,40,32,20,Internal reserved,0x0000,
66,42,33,21,Internal reserved,0x0000,
68,44,34,22,Internal reserved,0x0000,
70,46,35,23,Internal reserved,0x0000,
72,48,36,24,Internal reserved,0x0000,
74,4A,37,25,Internal reserved,0x0000,
76,4C,38,26,Internal reserved,0x0000,
78,4E,39,27,Internal reserved,0x0000,
80,50,40,28,Internal reserved,0x0000,
82,52,41,29,Internal reserved,0x0000,
84,54,42,2A,Internal reserved,0x8800,CRWLPCIEGEN2-160 WAR
86,56,43,2B,Internal reserved,0x030A,CRWLPCIEGEN2-160 WAR
88,58,44,2C,Internal reserved,0x0160,CRWLPCIEGEN2-160 WAR
90,5A,45,2D,Internal reserved,0x0000,
92,5C,46,2E,Internal reserved,0x0000,
94,5E,47,2F,Internal reserved,0x0000,
96,60,48,30,PCI device ID,0x43D9,BCM43570 Dual-Band
98,62,49,31,PCI Class Code bits 15:0; set as 0x8000,0x8000,
100,64,50,32,"23:16: set as 0x02
15:8: Internal reserved
7:0 PCI Class code",0x0002,
102,66,51,33,Internal reserved,0x0000,
104,68,52,34,"0 BAR1 Enabled
3:1 BAR1 Size
4 Power Management Enable
10:5 Report PME bits in Dstates11 Clock PME enabled
15:12 BAR0 backplane adddress translation",0x3FF5,
106,6A,53,35,BAR0 backplane adddres translation,0x1800,
108,6C,54,36,BAR2 enable and size,0x0000,
110,6E,55,37,Internal reserved,0x0000,
112,70,56,38,Internal reserved,0x0000,
114,72,57,39,Internal reserved,0x0000,
116,74,58,3A,Internal reserved,0x0000,
118,76,59,3B,Internal reserved,0x0000,
120,78,60,3C,Internal reserved,0x0000,
122,7A,61,3D,Internal reserved,0x0000,
124,7C,62,3E,Internal reserved,0x0000,
126,7E,63,3F,Internal reserved,0x0000,
-1,-1,-1,-1,,"Header Revision, bcm943570pcieir_p153",
,,,,,,
,,,,,,
