How to build ASD 

Before starting:
----------------
Only Fedora Core FC4 is supported for ASD2.3 on Linux
Only WinCE5.0 is supported for DUT and WinXP SP2 for ca,cli and PCTG in the 
case of ASD2.3 on Windows

For Linux 
To build locally for x86: 
> cd src/tools/Wifi_ASD_test 
> make clean 
> make
> Next Go to src/wl/exe folder 
> make //This will build the wl exe as well as wl servers.

Results will be these binaries for x86: 
cli/ca_cli  libwfa ca/wfa_ca  cli/tc_cli 
The above build creates the ASD library libwfa.
 This gets linked with the wl servers.
 The binaries will be src/wl/exe/wl, src/wl/exe/socket/x86/wl_server_socket,src/wl/exe/wifi/x86/wl_server_wifi,src/wl/exe/serial/x86/wl_server_serial 
The binary in src/wl/exe/wl has the support for executing local wl commands and also the remote wl (client-server model). 

To build locally for ARM: 
Set the path & toolchain for ARM build: 
export PATH=/projects/hnd/tools/linux/hndtools-arm-linux-3.4.3/bin:$PATH
export ARCH=arm
export CROSS_COMPILE=arm-linux-
export LINUXVER=2.6.9-intc1



>cd src/tools/Wifi_ASD_test 
> make clean 
> make TARGETENV=linuxarm_le
> Next Go to src/wl/exe folder 
> make TARGETENV=linuxarm_le
//This will build the wl exe as well as wl servers for ARM

Results will be these binaries for ARM: 
cli/ca_cli libwfa ca/wfa_ca cli/tc_cli 
The above build creates the ASD library libwfa. This gets linked with the wl servers. 
The binaries will be wlarm_le, socket/arm_le/wl_server_socketarm_le,wifi/arm_le/wl_server_wifiarm_le,serial/arm_le/wl_server_serialarm_le

For Windows XP and Windows CE DUT 
To make local builds you need to have the cygwin environment setup. 
>cd src/tools/Wifi_ASD_test/asd_ce
make WINCE=500 PROCESSOR=X86 or ARM 
The above command builds the ASD_CE.lib 
>cd src/wl/exe
The binaries generated will be wl.exe (WinXP client) 
>cd src/wl/exe/ce 
make WINCE=500 PROCESSOR=X86 or ARM 
The binaries generated will be wl.exe, wl_server_socket.exe,wl_server_wifi.exe,wl_server_serial.exe

Setup for ASD2.3 on Linux
-------------------------
I have been running the CLI and the control agent (CA) on the same 
machine (10.19.72.66) but these can be different machines.
The DUT is 10.19.73.6.

On DUT machine:
	Copy or link the wl command line tool into /tmp/ASD
	cp wl /tmp/ASD
	      or
	ln -s my_workarea/src/wl/exe/wl /tmp/ASD/wl

	(Documentation from Wifi says you need to copy scripts but ignore
	that, the BRCM port does not use them.)

On DUT machine: 
	Use command line to specify interface/port to listen on:
	we may use any of three servers (depending on the transport)
	
	wl_server_serial
	wl_server_wifi
	wl_serial_socket
	The following assumes the following for the wlan interface:
		eth1
		192.168.1.15 
On CA machine: 
	Set environment variables to point to addr & port of DUT machine.
	Command line specifies interface/local port to listen on for requests:
	setenv WFA_ENV_AGENT_IPADDR 10.19.73.6;setenv WFA_ENV_AGENT_PORT 8000
	for serial server
	ca/wfa_ca eth0 9000 --dongle /dev/ttyS0

	for wifi server
	ca/wfa_ca eth0 9000 --wifi <server MAC>
	
	for socket server
	ca/wfa_ca eth0 9000 --socket <server IP>

On CLI machine: 
	Set environment variables to point to addr & port of CA machine:
	setenv WFA_ENV_TC_IPADDR 10.19.72.66;setenv WFA_ENV_TC_PORT 9000
	cli/tc_cli ca_get_version 

Of course the environment vars only need to be set the first time. 

If you want to use the traffic generator, you will need the following:
TG : Traffic Generator
TGCC : Traffic Generator Control Console

I am running TG, TGCC, anc TGCC CLI all on a single machine with the followng, which
is assumed for the following instruction.
	eth0 : 10.19.12.132
	eth1 : 192.168.1.10
On Traffic Generator machine: 
	Use command line to specify interface/port to listen on:
	tc/wfa_pctg eth1 9800
On TG Control Console machine: 
	Set environment variables to point to addr & port of Traffic Generator machine.
	Command line specifies interface/local port to listen on for requests:
	setenv WFA_ENV_TC_IPADDR 192.168.1.10
	setenv WFA_ENV_TC_PORT 9800
	tc/wfa_tc eth1 9850
On TG Control Console CLI machine: 
	Set environment variables to point to addr & port of TGCC machine:
	setenv WFA_ENV_TC_IPADDR 192.168.1.10
	setenv WFA_ENV_TC_PORT 9850

Setup for ASD2.3 on Windows:
----------------------------
On DUT machine:
Make the entries for the wfa_dut.exe and the wl.exe in the project.bib file . Do a  Copy to Release directory
and the Make a Runtime Image. 

For CA Machine:
It should run on Linux machine as mentioned in Linux part.


For Client Machine:
set WFA_ENV_CA_IPADDR 172.22.64.112 /*(IP of CA)*/
set WFA_ENV_CA_PORT 9000

Traffic Generator: ENVIRONMENT VARIABLES SETTING & RUNNING

For TG Console Machine:
set WFA_ENV_PCTG_IPADDR 172.22.64.112 /*(IP of TG)*/
set WFA_ENV_PCTG_PORT 9800

For TG Client Machine:
set WFA_ENV_TC_IPADDR 172.22.64.112 /*(IP of TG Console)*/
set WFA_ENV_TC_PORT 9850

How to run ASD exe’s on Windows
-------------------------------

On Windows CE DUT
dut => run any of the server.

On CA and CLI
for serial server
	ca/wfa_ca eth0 9000 --wince --dongle com1

	for wifi server
	ca/wfa_ca eth0 9000 --wince --wifi <server MAC>
	
	for socket server
	ca/wfa_ca eth0 9000 --wince --socket <server IP>

On TG machine:
tc => wfa_pctg xxxx 9800

On TG Console Machine:
tc => wfa_tc xxxx 9850
tc_cli => tc_cli 

