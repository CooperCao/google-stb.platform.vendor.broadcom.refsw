#!/bin/env utf
# -*-tcl-*-
#
# SWWLAN-27752 UTF: 4331, 43228, 43224, 4322 PSM Watchdog while
# roaming when AP is transmitting to another STA
#
# $Id: 3ece73d3753000d38fb3c0c15c93cb83e48547ba $
# $Copyright Broadcom Corporation$
#

package require UTF
package require UTF::Test::ConnectAPSTA

UTF::Test SWWLAN-27752 {AP STA1 STA2} {

    # Associate STA2 in Open
    ConnectAPSTA $AP $STA2 -security open

    # Associate STA1 in AES.  STA2 will fail to reassociate due to
    # security mismatch.
    ConnectAPSTA $AP $STA1 -security aespsk2

    # Pass traffic to STA1
    UTF::Multiperf [list $AP $STA1] -i 2 -t 20

}
