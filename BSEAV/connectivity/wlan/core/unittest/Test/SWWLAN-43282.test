#!/bin/env utf
# -*-tcl-*-
#
# SWWLAN-43282 UTF: 4360X51 MacOS trunk all associations fail with
# mac-suspend when offloads are enabled
#
# $Id: 0dd83c979a4a88476d02b67ac657850007904276 $
# $Copyright Broadcom Corporation$
#

package require UTF
package require UTF::Test::ConnectAPSTA

UTF::Test SWWLAN-43282 {AP STA args} {

    # Make sure we have an AP loaded
    if {[catch {$AP wl ver}]} {
	$AP reload
    }

    UTF::Record "$STA load $args" {
	eval $STA load $args
    }
    UTF::Try "$STA associate to $AP" {
	ConnectAPSTA $AP $STA -security open -chanspec 36
    }
    UTF::Try "$STA unload" {
	# Unload now because Macs need to reboot after unload and it
	# saves time if we let it reboot after the test has finished.
	$STA unload
    }
}
