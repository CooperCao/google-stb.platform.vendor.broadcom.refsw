<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=us-ascii">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<title>Broadcom 97278 A0 Phase 17.3 Set-Top Unified Reference Software Release
(URSR) Release Notes</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-right:0in;
	margin-left:0in;
	font-size:24.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h4
	{mso-style-link:"Heading 4 Char";
	margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h5
	{mso-style-link:"Heading 5 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	color:#243F60;
	font-weight:normal;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{mso-style-link:"Plain Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
pre
	{mso-style-link:"HTML Preformatted Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;
	font-style:italic;}
span.Heading5Char
	{mso-style-name:"Heading 5 Char";
	mso-style-link:"Heading 5";
	font-family:"Cambria","serif";
	color:#243F60;}
span.HTMLPreformattedChar
	{mso-style-name:"HTML Preformatted Char";
	mso-style-link:"HTML Preformatted";
	font-family:"Courier New";}
span.PlainTextChar
	{mso-style-name:"Plain Text Char";
	mso-style-link:"Plain Text";
	font-family:"Calibri","sans-serif";}
p.msolistparagraphcxspfirst, li.msolistparagraphcxspfirst, div.msolistparagraphcxspfirst
	{mso-style-name:msolistparagraphcxspfirst;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.msolistparagraphcxspmiddle, li.msolistparagraphcxspmiddle, div.msolistparagraphcxspmiddle
	{mso-style-name:msolistparagraphcxspmiddle;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.msolistparagraphcxsplast, li.msolistparagraphcxsplast, div.msolistparagraphcxsplast
	{mso-style-name:msolistparagraphcxsplast;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.msochpdefault, li.msochpdefault, div.msochpdefault
	{mso-style-name:msochpdefault;
	margin-right:0in;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p.gmail-m-5047815134937865191msolistparagraph, li.gmail-m-5047815134937865191msolistparagraph, div.gmail-m-5047815134937865191msolistparagraph
	{mso-style-name:gmail-m_-5047815134937865191msolistparagraph;
	margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
span.apple-converted-space
	{mso-style-name:apple-converted-space;}
span.gmailmsg
	{mso-style-name:gmailmsg;}
span.gmail-m-5047815134937865191gmailmsg
	{mso-style-name:gmail-m_-5047815134937865191gmailmsg;}
.MsoChpDefault
	{font-size:10.0pt;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=WordSection1>

<h1 style='margin-left:15.0pt'><span style='font-size:12.0pt'>Index</span></h1>

<p style='margin-left:15.0pt'><span style='color:#0070C0'><a href="#features"><span
style='color:#0070C0'>Features</span></a></span></p>

<p style='margin-left:15.0pt'><span style='color:#0070C0'><a
href="#where_to_start"><span style='color:#0070C0'>Where to Start</span></a></span></p>

<p style='margin-left:15.0pt'><span style='color:#0070C0'><a href="#known_bugs"><span
style='color:#0070C0'>Known Issues</span></a> </span></p>

<div>

<p><a name=top><strong>Broadcom 97278/7278 A0 Phase 17.3 </strong></a><strong>Set-Top
Unified Reference Software Release Notes</strong></p>

<p><strong>Release Date: </strong></p>

<blockquote style='margin-top:5.0pt;margin-right:0in;margin-bottom:5.0pt'>

<p>August 19, 2017</p>

<p>Phase 17.3 Release </p>

</blockquote>

<p><strong>Platforms Supported: </strong></p>

<p class=MsoNormal style='text-indent:.5in'>97278SV BCM7278 A0 Revision</p>

<p class=MsoNormal style='text-indent:.5in'>97278HB BCM7278 A0 Revision</p>

<p class=MsoNormal style='text-indent:.5in'>&nbsp;</p>

<p class=MsoNormal><b>BCM7278 A0 Supported boards</b> </p>

<table class=MsoNormalTable border=1 cellspacing=1 cellpadding=0>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>SV</p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>Silicon verification</p>
  </td>
 </tr>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>HB</p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>Hybrid</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-indent:.5in'>&nbsp;</p>

<p class=MsoNormal><a name="software_deliverables">Note: BCM7278 includes a 64
bit ARM CPU. The supplied kernel comes in 32-bit and 64-bit flavors. 64 bit
kernel files can be identified by &#8220;64&#8221; suffix. Bolt bootloader can
boot either kernel. Please refer to &#8220;64 bit Migration Application
Note&#8221; for more details.</a></p>

<p class=MsoNormal><strong>&nbsp;</strong></p>

<p><a name="where_to_start"><strong>Where To Start</strong></a><br>
<a href="#top"><b><span style='color:windowtext'>(Top)</span></b></a></p>

<p class=MsoNormal>Read BroadcomReferencePlatformSetup.pdf for an overview.<br>
Read Atlas_User_Guide.pdf for information on configuring the Linux environment
on your Build Server and Set-Top, and information on building and installing
Atlas as part of the Reference Software. </p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><strong>Important Notes about Limitations</strong></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>In URSR 17.3, audio /DSP support is limited:</p>

<p class=MsoNormal>7278 audio support in this release includes standalone UDC
(AC3/DDP) and Dolby AAC-HE [Dolby MS12 license required] and MPEG audio decode from TS or ES
content.  For AAC support, build with BDSP_MS12_SUPPORT=B.</p>

<p class=MsoNormal>No other codecs are supported on 7278 in this release. In
addition, advanced usage cases requiring DspMixer or Transcode are not
supported on 7278 in this release.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Security (NEXUS_SECURITY_SUPPORT, SAGE_SUPPORT) is not
supported in this release. </p>

<p class=MsoNormal>Nexus Power Management (NEXUS_POWER_MANAGEMENT=y) is not
supported in this release.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Nexus Video Encoder (VIDEO_ENCODER_SUPPORT=y) has
preliminary support in this release.&nbsp; Transcoding with audio<br>
is not supported, because audio mixer and audio encoder are not yet supported.&nbsp;
Video encoder limitations:</p>

<p class=MsoListParagraph style='text-indent:-.25in'><span style='font-family:
Symbol'>&middot;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>HW: AVC/MPEG2 only supports I-only GOP structure (workaround
using <span style='color:black'>numP=0, example below</span>)</p>

<p class=MsoListParagraph style='text-indent:-.25in'><span style='font-family:
Symbol'>&middot;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>HW: High bitrate streaming may not function properly due to the
SW needing to swap endianness of the CDB on-the-fly</p>

<p class=MsoListParagraph style='text-indent:-.25in'><span style='font-family:
Symbol'>&middot;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>FW/SW: Frame rates lower than 14.985 are not supported<br>
<br>
</p>

<p class=MsoNormal>HDR 2.0 features supported in this release:</p>

<p class=MsoListParagraph style='text-indent:-.25in'><span style='font-family:
Symbol'>&middot;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>HDR Metadata Extraction</p>

<p class=MsoListParagraph style='text-indent:-.25in'><span style='font-family:
Symbol'>&middot;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>HDR10 pass-through</p>

<p class=MsoListParagraph style='text-indent:-.25in'><span style='font-family:
Symbol'>&middot;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>HLG pass-through</p>

<p class=MsoListParagraph style='text-indent:-.25in'><span style='font-family:
Symbol'>&middot;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>SDR --&gt; HDR conversion</p>

<p class=MsoListParagraph style='text-indent:-.25in'><span style='font-family:
Symbol'>&middot;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>HDR10 --&gt; SDR conversion</p>

<p class=MsoListParagraph style='text-indent:-.25in'><span style='font-family:
Symbol'>&middot;<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>HLG --&gt; HDR10 conversion</p>

<p><strong>Quick Build Instructions</strong></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal># tar -xvjf rootfs-4.1-1.12.tar.bz2 </li>
 <li class=MsoNormal># tar -xvjf stblinux-4.1-1.12.tar.bz2 </li>
 <li class=MsoNormal># cd rootfs </li>
 <li class=MsoNormal># make vmlinuz-initrd-arm <i>(For 32-bit version of the
     kernel build)</i></li>
 <li class=MsoNormal># make vmlinuz-initrd-arm64 <i>(For 64-bit version of the
     kernel build)</i></li>
 <li class=MsoNormal># cd ../linux </li>
 <li class=MsoNormal>export LINUX=`pwd` </li>
 <li class=MsoNormal>tar -C /opt/toolchains -xvjf stbgcc-4.8-1.6.tar.bz2 </li>
 <li class=MsoNormal>PATH=/opt/toolchains/ stbgcc-4.8-1.6/bin:$PATH </li>
 <li class=MsoNormal>export B_REFSW_ARCH=arm-linux </li>
 <li class=MsoNormal>or <span style='font-size:7.0pt;color:black'>&nbsp;<span
     class=apple-converted-space>&nbsp;</span></span><span style='color:black'><span
     style='orphans: auto;text-align:start;widows: 1;-webkit-text-stroke-width: 0px;
     word-spacing:0px'>export B_REFSW_ARCH=aarch64-linux (For compiling the
     code with 64 bit toolchain)</span></span></li>
</ul>

<p><strong>Quick Boot instructions</strong></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>BOLT&gt; boot -z
     &lt;network_location&gt;:41-1.12/vmlinuz-initrd-arm </li>
 <li class=MsoNormal>BOLT&gt; boot -z
     &lt;network_location&gt;:41-1.12/vmlinuz-initrd-arm64&nbsp; - This command
     will boot 64 bit kernel instead of 32 bit kernel. </li>
</ul>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal><strong>Set the kernel to autoboot</strong> </p>

<p class=MsoNormal>&nbsp;</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>BOLT&gt; flash
     &lt;network_location&gt;:41-1.12/vmlinuz-initrd-arm flash0.kernel </li>
</ul>

<p class=MsoListParagraph style='text-indent:-.25in'><span style='font-size:
10.0pt;font-family:Symbol'>&middot;</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Or BOLT&gt; flash &lt;network_location&gt;:41-1.12/vmlinuz-initrd-arm64
flash0.kernel&nbsp; - For 64 bit kernel</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>BOLT&gt; setenv -p STARTUP &quot;boot -z flash0.kernel:&quot;
     </li>
 <li class=MsoNormal>BOLT&gt; reboot</li>
</ul>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><b>How to set a board to autoboot with kernel and ubifs
rootfs and binaries into the flash:</b></p>

<p class=MsoListParagraph style='text-indent:-.25in'>&middot;<span
style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Boot
with vmlinuz-initrd kernel.</p>

<p class=MsoListParagraph style='text-indent:-.25in'>&middot;<span
style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Run
&quot;stbutil&quot;</p>

<p class=MsoListParagraph style='text-indent:-.25in'>&middot;<span
style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Select
option 1 for flashing the noninitrd kernel to the flash. Again run
&quot;stbutil&quot; and select 2 to flash rootfs into the flash.</p>

<p class=MsoListParagraph style='text-indent:-.25in'>&middot;<span
style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Reboot
the board with &quot;boot flash0.kernel 'ubi.mtd=flash1.rootfs0
rootfstype=ubifs root=ubi0:rootfs rw'&quot; </p>

<p class=MsoListParagraph style='text-indent:-.25in'>&middot;<span
style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>In
case you want to run any application on the startup then, copy the application
binaries in /data/bin of the flash. Copy the streams in /data/media. Edit
/etc/profile and put the commands you want to run after the boot. Save the
file.</p>

<p class=MsoListParagraph style='text-indent:-.25in'>&middot;<span
style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Set
the STARTUP variable to &quot;boot flash0.kernel 'ubi.mtd=flash1.rootfs0
rootfstype=ubifs root=ubi0:rootfs rw'&quot; </p>

<p class=MsoListParagraph style='text-indent:-.25in'>&middot;<span
style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Reboot
the board.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Following is the list of boards that are supported and the
options required to build the software. </p>

<table class=MsoNormalTable border=1 cellspacing=1 cellpadding=0 width="81%"
 style='width:81.4%'>
 <tr>
  <td style='padding:0in 0in 0in 0in'>
  <p class=MsoNormal><b>Board</b></p>
  </td>
  <td style='padding:0in 0in 0in 0in'>
  <p class=MsoNormal><b>export NEXUS_PLATFORM</b></p>
  </td>
  <td style='padding:0in 0in 0in 0in'>
  <p class=MsoNormal><b>export BCHP_VER</b></p>
  </td>
  <td style='padding:0in 0in 0in 0in'>
  <p class=MsoNormal><b>Additional build option, BOLT, Kernel information</b></p>
  </td>
 </tr>
 <tr>
  <td style='padding:0in 0in 0in 0in'>
  <p class=MsoNormal>97278 SV/HB</p>
  </td>
  <td style='padding:0in 0in 0in 0in'>
  <p class=MsoNormal>97278</p>
  </td>
  <td style='padding:0in 0in 0in 0in'>
  <p class=MsoNormal><b>A0</b></p>
  </td>
  <td style='padding:0in 0in 0in 0in'>
  <p class=MsoNormal>See &#8220;Quick Build Instructions&#8221; on how to setup
  LINUX and B_REFSW_ARCH variables</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>
  <strong>
    There are multiple box modes available which contain the RTS to support the different variants and features of this chip.<br>
    Information on the available box modes has been moved to a <span style='color:#0070C0'><a href="7278A0_box_mode_comparison.html"><span style='color:#0070C0'>new HTML table</a></span>.</p>
    <br>
    The table below contains information about the temporary box modes.
  </strong>
</p>




<p class=MsoNormal><b>&nbsp;</b></p>

<table class=MsoNormalTable border=1 cellspacing=1 cellpadding=0 width="96%"
 style='width:96.24%'>
 <tr style='height:19.65pt'>
  <td width="9%" style='width:9.36%;padding:.75pt .75pt .75pt .75pt;height:
  19.65pt'>
  <p class=MsoNormal><strong>Box modes</strong></p>
  </td>
  <td width="40%" style='width:40.38%;padding:0in 0in 0in 0in;height:19.65pt'>
  <p class=MsoNormal><b>Runtime option to be set before running any nexus
  application</b></p>
  </td>
  <td width="50%" valign=top style='width:50.02%;padding:0in 0in 0in 0in;
  height:19.65pt'>
  <p class=MsoNormal><strong>Description</strong></p>
  </td>
 </tr>
 <tr style='height:9.45pt'>
  <td width="9%" style='width:9.36%;padding:.75pt .75pt .75pt .75pt;height:
  9.45pt'>
  <p class=MsoNormal>TEMP_Box1000</p>
  </td>
  <td width="40%" style='width:40.38%;padding:0in 0in 0in 0in;height:9.45pt'>
  <p class=MsoNormal>export B_REFSW_BOXMODE=1000</p>
  </td>
  <td width="50%" valign=top style='width:50.02%;padding:0in 0in 0in 0in;
  height:9.45pt'>
  <p class=MsoNormal>Two 1080p60 capable decoders, No display (headless only),
  HDMI input, Two transcodes to 1080p30</p>
  </td>
 </tr>
 <tr style='height:9.45pt'>
  <td width="9%" style='width:9.36%;padding:.75pt .75pt .75pt .75pt;height:
  9.45pt'>
  <p class=MsoNormal>TEMP_Box1001</p>
  </td>
  <td width="40%" style='width:40.38%;padding:0in 0in 0in 0in;height:9.45pt'>
  <p class=MsoNormal>export B_REFSW_BOXMODE=1001</p>
  </td>
  <td width="50%" valign=top style='width:50.02%;padding:0in 0in 0in 0in;
  height:9.45pt'>
  <p class=MsoNormal style='text-align:justify'>Two 1080p60 decoders, UHD with
  MAIN (no PIP), SD (graphics only), No Multi-PIP support, No HDMI input, One transcode
  to 1080p30</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-GB style='color:#1F497D'>&nbsp;</span></p>

<p class=MsoNormal><strong>Instructions to build nexus playback utility and use
it to decode and display a UHD stream </strong></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal># tar xvfz refsw_release_97278_20170819.src.tgz </li>
 <li class=MsoNormal>#cd nexus/utils </li>
 <li class=MsoNormal>#make install </li>
</ul>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>Connect UHD 4K TV to HDMI </li>
 <li class=MsoNormal>#nexus playback -display_format 3840x2160p60 -component
     off -max_video 3840,2160 -probe &lt;stream_name &gt;</li>
</ul>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal><b>Instructions to build atlas and use it to play UHD stream
</b></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal># tar xvfz refsw_release_97278_20170819.src.tgz</li>
 <li class=MsoNormal>#cd BSEAV/app/atlas/build </li>
 <li class=MsoNormal>#make install </li>
</ul>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>Connect UHD 4K TV to HDMI</li>
 <li class=MsoNormal>Mount the USB/SATA containing the 4kX2k stream as
     /data/videos </li>
</ul>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal>Run the following commands to run atlas after extracting
     the tarball from obj.97278/BSEAV/bin dir.</li>
 <li class=MsoNormal>#start install </li>
 <li class=MsoNormal>#start atlas </li>
 <li class=MsoNormal>From the menu, select Playback -&gt; 4kp60 stream. </li>
 <li class=MsoNormal>Using the remote control for the board, select Menu -&gt;
     Display -&gt; Format -&gt; 2160p 60Hz. You should be able to see the
     stream playback in 4Kp60 display format.</li>
</ul>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal><b>Instructions to test/demonstrate video encoder </b></p>

<p class=MsoNormal style='margin-left:.25in'>Although there are limitations,
video encoding can be demonstrated.&nbsp; Audio encoding / transcoding is not
yet working.&nbsp; You must use one of the temporary box modes that support
video encoder.&nbsp; At runtime, export B_REFSW_BOXMODE=1000 for the
&#8220;headless&#8221; (no display) box mode, or export B_REFSW_BOXMODE=1001
for the box mode which supports a display.&nbsp; See
nexus/platforms/97278/docs/7278_TEMP_box1000.pdf or
nexus/platforms/97278/docs/7278_TEMP_box1001.pdf for details.&nbsp; <br>
<br>
On the build server, compile using the following steps.</p>

<p class=MsoListParagraph style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'>&middot;</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>#export VIDEO_ENCODER_SUPPORT=y</p>

<p class=MsoListParagraph style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'>&middot;</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>#cd rockford/unittests/nexus</p>

<p class=MsoListParagraph style='margin-left:.75in;text-indent:-.25in'><span
style='font-family:Symbol'>&middot;</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>#make install</p>

<p class=MsoNormal style='margin-left:.25in'>&nbsp;</p>

<p class=MsoNormal style='margin-left:.25in'>On the settop, run the following
to demonstrate transcoding an AVC file to 480p HEVC. </p>

<p class=MsoNormal style='background:white'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
export B_REFSW_BOXMODE=1001</span></p>

<pre style='background:white'><span style='color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; export video_encoder_verification=1</span></pre>

<p class=MsoNormal style='background:white'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
nexus unittests/encoder/transcode_ts -scr 120 &lt;
transcode_ts-7278a0_box_1001.cfg</span></p>

<p class=MsoNormal style='background:white'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal style='margin-left:.25in'>where the contents of <span
style='font-size:10.0pt;font-family:"Courier New";color:black'>transcode_ts-7278a0_box_1001.cfg
are shown in the following lines. </span><span style='color:black'>video_encoder_verification
is needed due to a firmware limitation that will be fixed in the next
release.&nbsp; Adjust PIDs as necessary to match your source file.</span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='color:black'>Contents
of transcode_ts-7278a0_box_1001.cfg:</span></p>

<pre style='margin-left:.5in;background:white'><span style='color:black'>Source=file</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Path=/data/videos/avatar_AVC_15M.ts</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Stream=ts</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Vcodec=avc</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Vpid=257</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Pcrpid=257</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Audio=0</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Output=/data/videos/file.mpg</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>customFormat=0</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>format=480p</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>framerate=29.97</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>maxBitrate=2000000</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>numP=29</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>numB=0</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>encodeCodec=hevc</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>profile=high</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>level=4.0</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>nrt=1</span></pre>

<p class=MsoNormal style='margin-left:.25in'>On the settop, run the following to
demonstrate transcoding an AVC file to 480p AVC. </p>

<p class=MsoNormal style='background:white'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
export B_REFSW_BOXMODE=1001</span></p>

<p class=MsoNormal style='background:white'><span style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
nexus unittests/encoder/transcode_ts -scr 120 &lt;
transcode_ts-7278a0_box_1001.avc.cfg&nbsp;&nbsp; </span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='color:black'>Adjust
PIDs as necessary to match your source file.&nbsp; numP=0 is needed due to a
hardware limitation that will be fixed in rev. B0.</span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='color:black'>Contents
of transcode_ts-7278a0_box_1001.avc.cfg:</span></p>

<pre style='margin-left:.5in;background:white'><span style='color:black'>Source=file</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Path=/data/videos/avatar_AVC_15M.ts</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Stream=ts</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Vcodec=avc</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Vpid=257</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Pcrpid=257</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Audio=0</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>Output=/data/videos/file.mpg</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>customFormat=0</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>format=480p</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>framerate=29.97</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>maxBitrate=2000000</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>numP=0</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>numB=0</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>encodeCodec=avc</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>profile=high</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>level=4.0</span></pre><pre
style='margin-left:.5in;background:white'><span style='color:black'>nrt=1</span></pre>

<p class=MsoNormal style='margin-left:.25in'><span style='color:black'>&nbsp;</span></p>

<p><a name="known_bugs"><strong>Known issues</strong></a><br>
<a href="#top"><span style='color:windowtext'>(Top)</span></a> </p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0>
 <tr>
  <td style='background:#99CCCC;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Description</b></p>
  </td>
  <u1:p></u1:p>
  <td style='background:#99CCCC;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Jira Ticket </b></p>
  </td>
  <u1:p></u1:p>
  <td style='background:#99CCCC;padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Area of concern</b></p>
  </td>
 </tr>
 <u1:p></u1:p>
 <tr>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <u1:p></u1:p>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span style='background:whitesmoke'></span></p>
  </td>
  <u1:p></u1:p>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal></p>
  </td>
 </tr>
 <u1:p></u1:p>
</table>

<p class=MsoNormal>&nbsp;</p>

<p><strong><a name="features">Features in this Release</a></strong><br/><a href="#top">(Top)</a></p><p>All features listed in <span style="color:green">green</span> are new to this release.</p><p>Platforms Supported</p><ul><li>Board Support: SV and HB</li><li>Chip Rev Support: A0</li><li>Kernel Version: 4.1-1.12</li><li>Toolchain: stbgcc-4.8-1.6</li></ul><h4></h4><p>High Dynamic Range (HDR)</p><ul><li>HDR10/HLG/SDR (Pass-through and Conversion)</li><li>HDR10/HLG/SDR (Pass-through only)</li><li style="color:green">DolbyVision - (<span style="color:green">5</span>, <span style="color:green">8.1</span>, <span style="color:green">8.2</span>, <span style="color:green">8.3</span>, <span style="color:green">8.4</span>, <span style="color:green">8.5</span>, <span style="color:green">9</span>)</li><li style="color:green">Technicolor HDR Prime</li></ul><p>Video Decoder</p><ul><li>AVS-P16(AVS+)</li><li>AVS1-P2 - (Jizhun Profile @ L6.0)</li><li>DSS - DIRECTV TS</li><li>Dual HD</li><li>H.264 - (AVC Constrained BP, AVC {MP, HP} @L4.1, AVC {MP, HP} @L4.2, MVC {MP, HP}@L4.1, SVC {MP, HP, Constrained SHP} @L4.2)</li><li>HD + SD</li><li>HEVC - ({MP} @L5.1 1080/60p, {MP} @L5.1 4kx2k/24p, {MP} @L5.1 4kx2k/30p, {MP} @L5.1 4kx2k/60p, Dual HEVC decoding)</li><li>Media File Format Support - (MKV, WebM (VP9/VP8 video and Vorbis audio))</li><li>Mosaic</li><li>MPEG-2 - (MP@{LL, ML, HL})</li><li>SW Still image decode (BMP, TIFF, JPEG)</li><li>VP9</li></ul><p>Audio Decoder</p><ul><li>AC3 - (5.1, Stereo)</li><li>Dolby - (DD, DDPlus 5.1, DDPlus 7.1, DDPlus stereo)</li><li>MPEG - (MPEG-I LI/LII/LIII)</li></ul><p>System</p><ul><li>Fast Channel Change</li><li>Graphics - (2D GFX, 3D GFX (openGL, OpenVG))</li><li>Kernel Mode</li><li>LE</li><li>Nexus Multi Process Support</li><li>User Mode</li></ul><p>A/V Display</p><ul><li>All NTSC/ATSC/PAL resolutions</li><li>Audio  - HDMI output - (Compressed on HDMI, PCM on HDMI)</li><li>Audio - SPDIF output - (Compressed on SPDIF, PCM on SPDIF)</li><li>Audio Output - (SPDIF (Compressed), SPDIF (Stereo PCM))</li><li>HDMI CEC</li><li>HDMI Input - (2.0)</li><li>HDMI support - (HDMI 1.x HDMI Rx, HDMI 1.x HDMI Tx, HDMI 2.0 for HDMI Rx, HDMI 2.0 for HDMI Tx, HDMI 2.0a for HDMI Tx, HDMI CEC)</li><li>PIP: Simulataneous HD+HD display</li><li>PIP: Simultaneous HD+SD display</li><li>TSM - (+/-20mSec, ASTM)</li><li>Video - 1080p display - (24p, 25p, 30p, 50p, 60p)</li><li>Video - 4kx2k display - (UHD 3840x2160 24Hz, UHD 3840x2160 25Hz, UHD 3840x2160 30Hz, UHD 4096x2160 24Hz)</li><li>Video - HDMI output - (2.0)</li></ul><p>PVR</p><ul><li>PVR TSM</li><li>Record - (AVC, MPEG2, MPEG4, MVC)</li><li>STC rate based trickmode</li><li>Timeshift - (AVC, MPEG2, MPEG4, MVC)</li><li>Trick mode - (AVC, Decoder trickmode, Display Queue Trickmode (DQT), DSOLA with audio, Fast Forward, HEVC, Host trickmode, Host trickmode w/o index on MPEG-2, MPEG2, MPEG4, MVC, playback, Rewind, Slow motion, Smooth 1x rewind using MDQT, VP9)</li></ul><p>IPTV</p><ul><li>BIP API - (Dynamic clock recovery reconfiguration, HSL Server side trickmode, IGMP Linstener, RTSP server, Streamer)</li><li>HTTP streaming of MPEG2/MPEG4 TS content</li><li>IP HTTP playback from local server</li><li>IP video on demand using RTSP and RTP protocols</li><li>Live UDP/RTP channel decode</li><li>Network Record Support</li><li>Record of UDP and RTP channels to HDD</li><li>RTCP protocol support</li><li>RTSP Playback &amp; Trickmode Support</li><li>SES SAT&gt;IP 1.2 spec</li><li>UDP streaming of MPEG2/MPEG4 TS content</li></ul><p>Networking</p><ul><li>Ethernet MAC - (10/100 Eth MAC, 1000 Eth MAC)</li></ul><p>Miscellaneous</p><ul><li>NxClient Multiprocess library - (32/64 mixed mode, API to control audio output configuration, API to control
slave display settings and sample aspect ratio, Audio Primer for fast main/PIP audio swap, Auto Volume Level, Callback for display changes, Display VBI functions, Explicit PIP window support, HDMI input encoding supporting (included rework of nxclient hdmi input api), Main/PIP video swap, NRT (non-real-time) transcode, nxserver external app mode, Per-output audio volume control, Picture quality adjustments, PIP mosaic, SCMS for SPDIF, Video-as-graphics)</li><li>Virtual L2 interrupt</li></ul><p>Transport</p><ul><li>Message Filtering</li><li>MTSIF</li><li>PID Filtering</li><li>Remux</li><li>TSMF</li><li style="color:green">SW based generic Channel Bonding</li></ul><p>Power Management</p><ul><li>Adaptive Voltage Scaling</li></ul><p>3D Video Display</p><ul><li>3D packing format - (1920x1080i@50Hz, 1920x1080i@59.94/60Hz, 1920x1080p@24Hz)</li></ul><p>Linux</p><ul><li>CMA</li><li>Ethernet link and Ethernet GPhy</li><li>Ethernet Switch</li><li>File system - (JFFS2, Rootfs, squashfs, UBIFS)</li><li>Flash - (NAND, NOR, SDIO, SPI)</li><li>Generic driver for SPI interface</li><li>Generic I2C driver</li><li>PCIe</li><li>SATA - (Sata2, Sata3)</li><li>UART port</li><li>USB</li></ul><p>Cable FE</p><ul><li>BCM3128 tuner support - (Full band capture with TR69/135)</li><li>QAM Tuning</li></ul><p>Transcoder</p><ul><li>Transcoder input from tuner, IP or local playback for compressed video - (H.264 Source, MPEG-2 Source)</li><li>Video Encode codec support - (H.264 (AVC) HD and SD (1080i50, 720p50, 480p50, 576i50), H.264 (AVC) HD and SD (1080p24/30, 1080i60, 720p60, 480p60, 480i60))</li></ul><p>Transcode - System</p><ul><li>A/V Sync</li><li>Software Extensible Mux Support</li><li>TS Stream Mux - Features - (Initial PTS configurable in NRT mode, PCR generation, Per segment PTS insertion, PES stream of VBI User Data Pass Through (ETSI en 300 472 and SCTE 127), Single Video PID, System Data Insertion (e.g. PAT/PMT), TTS 4-byte timestamp (Binary), TTS 4-byte timestamp (MOD300))</li><li>TS Stream Mux - Video Codecs - (H264/AVC, MPEG2)</li></ul><p>Transcode - Video</p><ul><li>Aspect Ratio Conversion</li><li>Bit Rates - (CBR, VBR)</li><li>Codecs - (H264/AVC {MP, HP, cBP}@{L1..L4})</li><li>Dynamic Settings - (Bit Rate, Frame Rate, GOP Structure, Resolution)</li><li>Frame Rates - (15/14.98, 24/23.97, 25, 30/29.97, 50, 60/59.94)</li><li>GOP Structure - (I)</li><li>Memory Bandwidth Reduction Modes</li><li>Operation Modes - (Non Real Time, Real Time)</li><li>Resolution</li><li>Scan Type - (Interlaced, Progressive)</li></ul><br><h4><p><strong><a name="features_future">Features Planned for the Next Release</a></strong><br/><a href="#top">(Top)</a></p></h4>

</div>

</div>

</body>

</html>
