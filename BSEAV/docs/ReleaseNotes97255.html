<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=us-ascii">
<title>Broadcom 97255 A0 Phase 18.2 Set-Top Unified Reference Software
Release (URSR) Release Notes</title>
</head>

<body lang=EN-US link=blue vlink=purple>

<h1>
  <a name="_top"><strong>
      Broadcom 97255 A0 Phase 18.2
  </strong></a>
  <strong>
    Unified Set-Top Reference Software Release Notes
  </strong>
</h1>

<h2><strong>Release Date: </strong></h2>

<blockquote style='margin-top:5.0pt;margin-right:0in;margin-bottom:5.0pt'>
<p>June 25, 2018</p>
<p>Phase 18.2 URSR Release</p>
</blockquote>

<h2>Index</h2>
<ul>
  <li><a href="#important">Important notes</a></li>
  <li><a href="#platforms">Supported Platforms</a></li>
  <li><a href="#where_to_start">Where to Start</a></li>
  <ul>
    <li><a href="#linux">Linux kernel and root file system build instructions</a></li>
    <li><a href="#atlas">Atlas complication instructions</a></li>
    <li><a href="#boot">System boot instructions</a></li>
    <li><a href="#run">Runtime instructions</a></li>
  </ul>
  <li><a href="#features">Features</a></li>
  <li><a href="#limitations">Limitations</a></li>
</ul>

<h2><a name="important">Important notes&nbsp</a><a href="#top">(Top)</a></h2>

<ul><strong>
  <li>The 7255a0 family are the first chips to use TrustZone on ARM to provide a secure environment for decoding audio.</li>
  <li>Due to this change in architecture the boot sequence is unlike any other Broadcom set top box chip and the instructions
    below must be followed exactly in order to have a fully working system.</li>
  <li style="color:red">Due to the licensing restrictions of running Dolby audio code on ARM processors the audio codec files loaded into TrustZone must be encrypted.</li>
  <li style="color:red">This means that in order to run with audio enabled you must run with the secure BOLT and secure Astra packages.</li>
  <li style="color:red">To diasble audio at Nexus compile time add NEXUS_AUDIO_SUPPORT=n to your environment.</li>
  <li>This release now supports the of running the ARM processor in 32 bit emulation mode.</li>
</strong>
  <li>Instructions for building support for the Rafael tuner is covered in magnum/portinginterface/tnr/src/leapnarrowband/7255ib/rft/README.txt.</li>
</ul>
<h2><a name="where_to_start">Where To Start&nbsp</a><a href="#top">(Top)</a></h2>

<p >Read BroadcomReferencePlatformSetup.pdf for an overview.<br>
Read Atlas_User_Guide.pdf for information on configuring the Linux environment
on your Build Server and Set-Top, and information on building and installing
Atlas as part of the Reference Software. </p>

<h3><a name="linux"><b>Linux kernel and root file system build instructions&nbsp</a></b><a href="#top">(Top)</a></h3>

<ul style='margin-top:0in' type=disc>
 <li># tar -xjf stbgcc-6.3-1.2.tar.bz2 -C /opt/toolchains</li>
 <li># export PATH=/opt/toolchains/stbgcc-6.3-1.2/bin:$PATH </li>
 <li># tar -xvjf rootfs-4.9-1.7.tar.bz2 </li>
 <li># tar -xvjf stblinux-4.9-1.7.tar.bz2 </li>
 <li># cd rootfs </li>
 <li># make defaults-arm64</li>
 <li># make images</li>
 <li># export LINUX=`readlink -f ../linux` </li>
</ul>

<h3><a name="atlas"<b>Instructions to build atlas the Nexus sample UI application in 32bit mode</b></a><a href="#top">(Top)</a></h3>

<ul style='margin-top:0in' type=disc>
 <li> # tar xvfz refsw_release_unified_20180625.tgz</li>
 <li> # mkdir -p /opt/toolchains/tzos/DSO/
 <li> # tar -xjf gcc-aarch64-tzos-musl-5.3-2017q3.tar.bz2 -C /opt/toolchains/tzos/DSO/</li>
 <li> # tar -xjf gcc-arm-tzos-musl-5.3-2016q4v3.tar.bz2 -C /opt/toolchains/tzos/DSO/</li>
 <li> # export PATH=/opt/toolchains/gcc-aarch64-tzos-musl-5.3-2017q3/bin:/opt/toolchains/gcc-arm-tzos-musl-5.3-2016q4v3/bin:$PATH </li>
 <li> # export B_REFSW_ARCH=arm-linux</li>
 <li> # export NEXUS_PLATFORM=97255</li>
 <li> # export NEXUS_MODE=proxy</li>
 <li> # export BCHP_VER=A0</li>
 <li> # make -C BSEAV/app/atlas/build install </li>
</ul>

<h3><a name="boot"><b>Boot instructions&nbsp</b></a><a href="#top">(Top)</a></h3>

<ul style='margin-top:0in' type=disc>
 <li >BOLT&gt; tz init</li>
  <li >BOLT&gt; tz boot &lt;network_location&gt;:astra32.bin &lt;network_location&gt;:49-1.7/vmlinuz-initrd-arm</li>
 <li>N.B. Astra binaries get built as part of the RefSW build above.</li>
 <li>For the 2LD3 & 2LD4 low cost board designs with 512MB of RAM please add the nexus recommended bmem option to the boot arguments, it should be something like 'bmem=223m@192m'</li>
</ul>

<p><strong>
    There are multiple box modes available which contain the RTS to support the different variants and features of this chip.<br>
    Information on the available box modes has been moved to a <span style='color:#0070C0'><a href="7255A0_box_mode_comparison.html"><span style='color:#0070C0'>separate HTML table</a></span>.</p>
</strong></p>

<h3><a name="run"><b>Runtime instructions&nbsp</b></a><a href="#top">(Top)</a></h3>

<ul style='margin-top:0in' type=disc>
 <li >Connect the UHD TV via HDMI.</li>
 <li >Mount the USB/SATA drive containing the streams as /data/videos.</li>
</ul>

<ul style='margin-top:0in' type=disc>
 <li> Use the following commands to run atlas after extracting
     the refsw tarball from obj.97255.A0/BSEAV/bin dir.</li>
 <li> # export B_REFSW_BOXMODE=4 </li>
 <li> # echo performance > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
 <li> # echo performance > /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor
 <li> # start install </li>
 <li> # start atlas </li>
 <li> From the menu, select Playback -&gt; stream name. </li>
</ul>

<h2><a name="limitations">Limitations&nbsp</a><a href="#top">(Top)</a></h2>
<p>
  <ul style='margin-top:0in' type=disc>
    <li>SAGE support is limited in this engineering release:
    <ul>
        <li>SAGE 3.2.17 provides BP3, HDCP 2.2 and some DRM services.</li>
        <li>It is not currently possible to decode audio when SVP is enabled.</li>
        <li>DRM playback is limited to using the DIF playback applications, legacy DRM applications will not work.</li>
        <li>With the playback_dif_single application use the -noAudio option to stop the audio decode otherwise the application will cause continuous MRC violations.</li>
    </ul>
    </li>
    <li>Low power modes are not supported while running TrustZone.</li>
    <li>CPU dynamic voltage scaling is unsupported.</li>
    <li>Initial support for onboard QAM demod.</li>
  </ul>
</p>

<h2><a name="features">Features&nbsp</a><a href="#top">(Top)</a></h2>
<p>
  <strong>
    Information on Features has been consolidated in the <span style='color:#0070C0'><a href="ReleaseNotes.html"><span style='color:#0070C0'>generic ReleaseNotes.html</a></span>.</p>
  </strong>
</p>

</body>
</html>
