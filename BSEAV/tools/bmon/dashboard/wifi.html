<!--
/******************************************************************************
 *  Copyright (C) 2018 Broadcom.
 *  The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.
 *
 *  This program is the proprietary software of Broadcom and/or its licensors,
 *  and may only be used, duplicated, modified or distributed pursuant to
 *  the terms and conditions of a separate, written license agreement executed
 *  between you and Broadcom (an "Authorized License").  Except as set forth in
 *  an Authorized License, Broadcom grants no license (express or implied),
 *  right to use, or waiver of any kind with respect to the Software, and
 *  Broadcom expressly reserves all rights in and to the Software and all
 *  intellectual property rights therein. IF YOU HAVE NO AUTHORIZED LICENSE,
 *  THEN YOU HAVE NO RIGHT TO USE THIS SOFTWARE IN ANY WAY, AND SHOULD
 *  IMMEDIATELY NOTIFY BROADCOM AND DISCONTINUE ALL USE OF THE SOFTWARE.
 *
 *  Except as expressly set forth in the Authorized License,
 *
 *  1.     This program, including its structure, sequence and organization,
 *  constitutes the valuable trade secrets of Broadcom, and you shall use all
 *  reasonable efforts to protect the confidentiality thereof, and to use this
 *  information only in connection with your use of Broadcom integrated circuit
 *  products.
 *
 *  2.     TO THE MAXIMUM EXTENT PERMITTED BY LAW, THE SOFTWARE IS PROVIDED
 *  "AS IS" AND WITH ALL FAULTS AND BROADCOM MAKES NO PROMISES, REPRESENTATIONS
 *  OR WARRANTIES, EITHER EXPRESS, IMPLIED, STATUTORY, OR OTHERWISE, WITH
 *  RESPECT TO THE SOFTWARE.  BROADCOM SPECIFICALLY DISCLAIMS ANY AND ALL
 *  IMPLIED WARRANTIES OF TITLE, MERCHANTABILITY, NONINFRINGEMENT, FITNESS FOR
 *  A PARTICULAR PURPOSE, LACK OF VIRUSES, ACCURACY OR COMPLETENESS, QUIET
 *  ENJOYMENT, QUIET POSSESSION OR CORRESPONDENCE TO DESCRIPTION. YOU ASSUME
 *  THE ENTIRE RISK ARISING OUT OF USE OR PERFORMANCE OF THE SOFTWARE.
 *
 *  3.     TO THE MAXIMUM EXTENT PERMITTED BY LAW, IN NO EVENT SHALL BROADCOM
 *  OR ITS LICENSORS BE LIABLE FOR (i) CONSEQUENTIAL, INCIDENTAL, SPECIAL,
 *  INDIRECT, OR EXEMPLARY DAMAGES WHATSOEVER ARISING OUT OF OR IN ANY WAY
 *  RELATING TO YOUR USE OF OR INABILITY TO USE THE SOFTWARE EVEN IF BROADCOM
 *  HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES; OR (ii) ANY AMOUNT IN
 *  EXCESS OF THE AMOUNT ACTUALLY PAID FOR THE SOFTWARE ITSELF OR U.S. $1,
 *  WHICHEVER IS GREATER. THESE LIMITATIONS SHALL APPLY NOTWITHSTANDING ANY
 *  FAILURE OF ESSENTIAL PURPOSE OF ANY LIMITED REMEDY.
 ******************************************************************************/
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bmon Wifi Dashboard</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
    <!-- Babylon.js -->
    <script src="https://code.jquery.com/pep/0.4.2/pep.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
    <script src="https://preview.babylonjs.com/cannon.js"></script>
    <script src="https://preview.babylonjs.com/Oimo.js"></script>
    <script src="https://preview.babylonjs.com/earcut.min.js"></script>
    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>
    <script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
    <script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
    <script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
    <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script>
    <script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
    <!-- D3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.js"></script>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.js"></script>-->
    <!-- LOCALS -->
    <script src="wifivars.js?4"></script>
    <script src="wifichanstats.js?4"></script>
    <script src="wificore.js?7"></script>
    <script src="ampdu.js?4"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function (event) {
            loadGraph();
            request_out("?triggerScan=1", 0, 5000, Number.POSITIVE_INFINITY); /* delay, interval, times */
            request_out("currentStats", 0, 1000, Number.POSITIVE_INFINITY);
            request_out("powerStats", 0, 3000, Number.POSITIVE_INFINITY);
        });
    </script>
</head>
<style>
    .myProgress {
        width: 100%;
        height: 10px;
        background-color: grey;
    }

    .scanTable {
        font-family: Helvetica, sans-serif;
    }

    .myBar {
        width: 1%;
        height: 9px;
        background-color: #e5344c/* colorCalibration[3] */
        ;
    }

    banvas {
        background-color: blue;
        width: 100%;
        height: auto;
    }

    #renderCanv0 {
        width: 100%;
        height: 100%;
        touch-action: none;
    }

    #renderCanv1 {
        width: 100%;
        height: 100%;
        touch-action: none;
    }
</style>

<body>
    <nav class="navbar navbar-expand-md navbar-dark" style="background-color:#563d7c;">
        <a class="navbar-brand" href="index.html">
            <img src="img/320px-Broadcom_Ltd_Logo.svg.png" title="Broadcom Logo">
        </a>
        <span class="navbar-text font-weight-bold">
            BMON WIFI DASHBOARD
        </span>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="row">
            <!-- Left Hand Column -->
            <div class="col-lg-2 text-white" style="background-color:#604f7a;">
                <br>
                <!-- SSID -->
                <div class="card" style="background-color:#563d7c;">
                    <div class="card-header">
                        <p class="text-center">SSID</p>
                    </div>
                    <div class="card-body">
                        <h3 class="text-center text-info" id="apName">AP Name</h3>
                    </div>
                </div>
                <br>
                <!-- Signal Strength RSSI -->
                <div class="card" style="background-color:#563d7c;">
                    <div class="card-header">
                        <p class="text-center">SIGNAL STRENGTH (RSSI)</p>
                    </div>
                    <div class="card-body">
                        <!-- RSSI 2d responsive chart here-->
                        <h5 class="text-center text-success" id="comboRSSI">Excellent(-33)</h5>
                        <div style="width:100%;">
                            <canvas id="chartRSSI"></canvas>
                        </div>
                        <script>
                            var ctx = document.getElementById("chartRSSI");
                            rssiChart = new Chart(ctx, {
                                type: 'bar',
                                data: {
                                    labels: ["ANT-1", "ANT-2", "ANT-3", "ANT-4"],
                                    datasets: [{
                                        label: "RSSI (dbm)",
                                        backgroundColor: ["#3e95cd", "#c45850", "#3cba9f", "#e8c3b9"],
                                        data: [40, 43, 44, 25]
                                    }]
                                },
                                options: {
                                    legend: {
                                        display: false
                                    },
                                    title: {
                                        display: true,
                                        text: 'RSSI for each antenna in dbM'
                                    },
                                    scales: {
                                        yAxes: [{
                                            ticks: {
                                                beginAtZero: true
                                            }
                                        }]
                                    }
                                }
                            });
                        </script>
                    </div>
                </div>
                <br>
                <!-- Channel Specification -->
                <div class="card" style="background-color:#563d7c;">
                    <div class="card-header">
                        <p class="text-center">CHANSPEC</p>
                    </div>
                    <div class="card-body text-center text-warning ">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>WIDTH</th>
                                    <th>BAND</th>
                                    <th>CHAN</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td id="chanBW">80Mhz</td>
                                    <td id="chanBand">5G</td>
                                    <td id="chanNum">120</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <br>
                <!-- Data Rate -->
                <div class="card" style="background-color:#563d7c;">
                    <div class="card-header">
                        <p class="text-center">PHY RATE(Mhz)</p>
                    </div>
                    <div class="card-body">
                        <h3 class="text-center text-info" id="phyRate">0</h3>
                    </div>
                </div>
                <br>
                <!-- Power window-->
                <div class="card" style="background-color:#563d7c;">
                    <div class="card-header">
                        <p class="text-center">POWS</p>
                    </div>
                    <div class="card-body">
                        <div style="width:100%;">
                            <canvas id="powsDoughnut"></canvas>
                        </div>
                        <script>
                            var ctx = document.getElementById("powsDoughnut");
                            powsDoughnutChart = new Chart(ctx, {
                                type: 'doughnut',
                                data: {
                                    labels: ["Open", "Close"],
                                    datasets: [{
                                        label: "RSSI (dbm)",
                                        backgroundColor: ["#c45850", "#3cba9f"],
                                        data: [60, 40]
                                    }]
                                }
                            });
                        </script>
                    </div>
                </div>
                <br>
            </div>
            <!--Right Hand Column-->
            <div class="col-lg-10" style="background-color:white;">
                <br>

                <!-- Medium Statistics  -->
                <h5 style="color:#563d7c;">
                    MEDIUM STATISTICS
                    <button id="mediumStatsShowHideButton" type="button" class="btn btn-light" data-toggle="collapse" data-target="#mediumStats">-</button>
                </h5>
                <div id="mediumStats" class="collapse shadow show p-3 mb-5 bg-white rounded">
                    <div class="card bg-light border border-0 align-items-center">
                        <div class="card-body ">
                            <table>
                                <tr>
                                    <td>
                                        <div>
                                            <canvas id="statsTxRx"></canvas>
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <canvas id="statsNonWifi"></canvas>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <script>
                    $(function () {
                        $('#mediumStats').on('hide.bs.collapse', function () {
                            $('#mediumStatsShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-down"></span> +');
                        })
                        $('#mediumStats').on('show.bs.collapse', function () {
                            $('#mediumStatsShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-up"></span> -');
                            request_out("chanimStats", 0, 1000, Number.POSITIVE_INFINITY); /* delay, interval, times */
                        })
                    })
                </script>


                <!-- Channel Map  -->
                <h5 style="color:#563d7c;">
                    SCAN RESULTS
                    <button id="channelMapShowHideButton" type="button" class="btn btn-light" data-toggle="collapse" data-target="#channelMap">-</button>
                </h5>
                <div id="channelMap" class="collapse shadow p-3 mb-5 bg-white rounded">
                    <div class="card bg-light border border-0 align-items-center">
                        <div class="card-body">
                            <!-- Plot power,temperature,thremal threshold, cooling events along the time in x axis -->
                            <!-- <img class="img-fluid" src="img/chart_js_line_multi.png"> -->
                            <div id="insight" border="1"></div>
                        </div>
                    </div>
                </div>
                <script>
                    $(function () {
                        $('#channelMap').on('hide.bs.collapse', function () {
                            $('#channelMapShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-down"></span> +');
                        })
                        $('#channelMap').on('show.bs.collapse', function () {
                            $('#channelMapShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-up"></span> -');
                            // request_out("spectrumDataTrigger", 0, 0, 1); /* delay, interval, times */
                            request_out("spectrumData", 0, 3000, Number.POSITIVE_INFINITY); /* delay, interval, times */
                        })
                    })
                </script>

                <!-- AMPDU -->
                <h5 style="color:#563d7c;">
                    AMPDU CHARTS
                    <button id="channelMapView2ShowHideButton" type="button" class="btn btn-light" data-toggle="collapse" data-target="#channelMapView2">+</button>
                </h5>
                <div id="channelMapView2" class="collapse show shadow p-3 mb-5 bg-white rounded">
                    <div class="card bg-light border border-0 align-items-center">
                        <div class="card-body" id="card">
                            <div id="cand">
                                <table>
                                    <tr>
                                        <th>Receive VHT/SGI MCS</th>
                                        <th>Transmit VHT/SGI MCS</th>
                                    </tr>
                                    <tr>
                                        <td width="660" height="440">
                                            <canvas id="renderCanv0"></canvas>
                                        </td>
                                        <td width="660" height="440">
                                            <canvas id="renderCanv1"></canvas>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <script>
                    $(function () {
                        $('#channelMapView2').on('hide.bs.collapse', function () {
                            $('#channelMapView2ShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-down"></span> +');
                            // window.clearInterval(ampduTimer);
                        })
                        $('#channelMapView2').on('show.bs.collapse', function () {
                            $('#channelMapView2ShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-up"></span> -');
                            // ampduTimer = window.setInterval(function() { request_out("ampduData"); }, 1000);
                            request_out("ampduData", 0, 1000, Number.POSITIVE_INFINITY);
                            $("#cand").css("display", "block");
                        })
                    })
                </script>

                <!-- SURVEY -->
                <h5 style="color:#563d7c;">
                    SITE SURVEY
                    <button id="surveyShowHideButton" type="button" class="btn btn-light" data-toggle="collapse" data-target="#survey">+</button>
                </h5>
                <div id="survey" class="collapse shadow p-3 mb-5 bg-white rounded">
                    <div class="row">
                        <div class="col-md bg-light border border-0 align-items-center">
                            <h6 style="color:#563d7c;">5 Ghz SURVEY</h6>
                            <canvas id="myCanvas" height="100" border="1"></canvas>
                        </div>
                    </div>
                </div>
                <script>
                    $(function () {
                        $('#survey').on('hide.bs.collapse', function () {
                            $('#surveyShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-down"></span> +');
                        })
                        $('#survey').on('show.bs.collapse', function () {
                            $('#surveyShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-up"></span> -');
                            // request_out("spectrumDataTrigger", 0, 0, 1); /* delay, interval, times */
                            request_out("spectrumData", 0, 3000, Number.POSITIVE_INFINITY);
                        })
                    })
                </script>

                <!-- CHANNEL MAP -->
                <h5 style="color:#563d7c;">
                    CHANNEL MAP
                    <button id="mapShowHideButton" type="button" class="btn btn-light" data-toggle="collapse" data-target="#map">+</button>
                </h5>
                <div id="map" class="collapse shadow p-3 mb-5 bg-white rounded">
                    <svg role="chanmap" class="chanmap" width="500" height="440" align="center"></svg>
                    <div class="row" border="1">
                        <div class="col-md bg-light border border-0 align-items-center">
                            <h6 style="color:#563d7c;">5 Ghz MAP</h6>
                            <div class="days-hours-chanmap">
                                <!-- chanmap -->
                                <div class="calibration" role="calibration">
                                    <div class="group" role="example">
                                        <svg width="1" height="1">
                                        </svg>
                                    </div>
                                    <div role="toggleDisplay" class="display-control">
                                        <script type="text/javascript" src="wifiapp.js?22"></script>
                                    </div>
                                </div>
                                <!-- chanmap -->
                            </div>
                        </div>
                    </div>
                </div>
                <script>
                    $(function () {
                        $('#map').on('hide.bs.collapse', function () {
                            $('#mapShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-down"></span> +');
                        })
                        $('#map').on('show.bs.collapse', function () {
                            $('#mapShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-up"></span> -');
                            // request_out("spectrumDataTrigger", 0, 0, 1); /* delay, interval, times */
                            request_out("spectrumData", 0, 3000, Number.POSITIVE_INFINITY);
                        })
                    })
                </script>

                <!-- CHANNEL STATS -->
                <h5 style="color:#563d7c;">
                    CHANNEL STATS
                    <button id="chstatsShowHideButton" type="button" class="btn btn-light" data-toggle="collapse" data-target="#chstats">+</button>
                </h5>
                <div id="chstats" class="collapse shadow p-3 mb-5 bg-white rounded">
                    <div class="row" border="1">
                        <div class="col-md bg-light border border-0 align-items-center">
                            <h6 style="color:#563d7c;">Channel Idle</h6>
                            <canvas id="chanstats"></canvas>
                        </div>
                    </div>
                </div>
                <script>
                    $(function () {
                        $('#chstats').on('hide.bs.collapse', function () {
                            $('#chstatsShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-down"></span> +');
                        })
                        $('#chstats').on('show.bs.collapse', function () {
                            $('#chstatsShowHideButton').html(
                                '<span class="glyphicon glyphicon-collapse-up"></span> -');
                            request_out("chanimStats", 0, 1000, Number.POSITIVE_INFINITY);
                        })
                    })
                </script>

            </div>
        </div>
    </div>
</body>

</html>